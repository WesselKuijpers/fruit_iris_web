{% extends 'base.html' %}

{% block content %}
    <div class="container">
        <div class="main" id='main'>
            <div class="row">
                <div class="col-lg-4 offset-lg-4 col-md-4 offset-md-4 col-sm-12 text-center">
                    <i class="icon fas fa-camera-retro camera" id='upload-button'></i>
                </div>
            </div>
            <div class="col-lg-4 offset-lg-4 col-md-4 offset-md-4 col-sm-12 text-center"><br>
                <h3>Tap to upload photo</h3>
            </div>
            <input type="file" style="display: none" id="upload-input">
        </div>

        <div class="spinner hidden" id='spinner'>
            <div class="row">
                <div class="col-lg-4 offset-lg-4 col-md-4 offset-md-4 col-sm-12 text-center">
                    <img src="{{ url_for('static', filename='img/spinner.gif') }}" class="img-fluid">
                </div>
            </div>
        </div>

        <div class="result hidden" id="result">
            <div class="row">
                <div class="col-lg-4 offset-lg-4 col-md-4 offset-md-4 col-sm-12 text-center" id='result-img'></div>
            </div>
            <div class="col-lg-4 offset-lg-4 col-md-4 offset-md-4 col-sm-12 text-center"><br>
                <h4 id='result-text'></h4>
            </div>
            <div class="col-lg-4 offset-lg-4 col-md-4 offset-md-4 col-sm-12 text-center"><br>
                <h3>
                    <button class="btn btn-danger stretched-link" onclick="reset()">Try again!</button>
                </h3>
            </div>
        </div>
    </div>

    <script>
        $("#upload-button").on("click", function () {
            $("#upload-input").trigger("click");
        });

        $("#upload-input").on("change", function () {
            filename = $("#upload-input").val()
            if (filename.includes(".jpg") || filename.includes(".png")) {
                sendData()
            } else {
                alert("Please provide an image in either .jpg or .png format.")
            }
        })
    </script>
{% endblock %}